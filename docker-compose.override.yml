# Docker Compose Override - Solo para desarrollo local
# Se aplica automáticamente junto con docker-compose.yml

services:
  api:
    build:
      context: ./apps/api
      target: builder  # Usa stage de builder para desarrollo
    command: npm run dev
    volumes:
      # Sincroniza código fuente para hot-reload
      - ./apps/api/src:/app/src:ro
      - ./apps/api/prisma:/app/prisma:ro
      # Excluye node_modules del host
      - /app/node_modules
    environment:
      NODE_ENV: development
      RUN_SEED: "true"  # Seed en desarrollo

  web:
    volumes:
      - ./apps/web/src:/app/src:ro
      - /app/node_modules
      - /app/.next
    environment:
      NODE_ENV: development
